“
Complete the two partial SystemVerilog RTL files:

- sources/axi_top.sv : an AXI4-Lite slave peripheral that exposes a small memory-mapped register space.
- sources/csr_regfile.sv : an internal register file implementing data registers + CSR registers with per-register access permissions.

Read the specifications placed in /workdir/docs/Specification.md to construct and properly integrate the modules.
The design must be synthesizable, parameterized, and robust to AXI-Lite backpressure.

Hints:

1) Do not make access_violation sticky.
   - access_violation must be 00 by default.
   - Only assert 01/10/11 in the cycle where reg_write or reg_read is asserted.
   - If you hold a previous violation, later valid writes can incorrectly return SLVERR.

2) CSR bank is fixed and must match permissions exactly.
   - NUM_CSR_REGS = 4
   - CSR offsets (relative to CSR base) and access are:
       0: mcycle  RO
       1: mstatus RW
       2: mcause  RO
       3: mip     RO
   - Write to mstatus must return OKAY (bresp=0).
   - Write to mcycle must return SLVERR (bresp=2) and must not modify storage.
   - Both mistakes happened across the two failed attempts.

3) Out-of-range must always return SLVERR.
   - Any index >= (NUM_DATA_REGS + NUM_CSR_REGS) is out of range.
   - Out-of-range write: bresp = 2
   - Out-of-range read:  rresp = 2 and rdata = 0
   - One attempt returned OKAY for out-of-range and failed immediately.

4) Data-reg permissions must be enforced through AXI responses.
   - Read from WO data reg must return SLVERR (rresp=2) and rdata=0.
   - Write to RO data reg must return SLVERR (bresp=2) and must not modify storage.

5) AXI-Lite ordering: do not require AW and W handshakes in the same cycle.
   - Capture awaddr on AW handshake.
   - Capture wdata/wstrb on W handshake.
   - Complete the write once both have occurred (one outstanding transaction at a time).
   - A failed attempt incorrectly assumed AW and W must arrive together, which breaks when channels are decoupled.

6) WSTRB byte enables must preserve non-strobed bytes.
   - Full write (all strobe bits 1): write wdata directly.
   - Partial write: read-modify-write (base merge on current register value), do not zero bytes where wstrb=0.

7) reg_rdata holding:
   - When reg_read is 0, do not drive reg_rdata to 0 every cycle. Keep it stable.
   - Do not gate a read using a previous-cycle access_violation; compute permissions from address and access map for the current operation.
”